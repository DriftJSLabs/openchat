# ==============================================================================
# OpenChat - Test Environment Configuration
# ==============================================================================
# Configuration for running tests and CI/CD pipelines

NODE_ENV=test
NEXT_PUBLIC_APP_NAME=OpenChat Test
NEXT_PUBLIC_APP_VERSION=1.0.0-test

# Test Database - Separate from development
DATABASE_URL=postgresql://openchat:openchat_test@localhost:5432/openchat_test
TEST_DATABASE_URL=postgresql://openchat:openchat_test@localhost:5432/openchat_test

# Test Server Configuration
SERVER_HOST=localhost
SERVER_PORT=3002
WEB_PORT=3003
NEXT_PUBLIC_SERVER_URL=http://localhost:3002
NEXT_PUBLIC_WEB_URL=http://localhost:3003

# Test Authentication - Use test-only secrets
BETTER_AUTH_SECRET=test-secret-key-minimum-32-characters-for-testing-only
BETTER_AUTH_URL=http://localhost:3002
BETTER_AUTH_TRUSTED_ORIGINS=http://localhost:3003,http://localhost:3002

# Test CORS - Permissive for testing
CORS_ORIGIN=*
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_CREDENTIALS=true

# Test Logging - Minimal for clean test output
LOG_LEVEL=error
LOG_FORMAT=json
LOG_TIMESTAMP=false
ENABLE_DEBUG_LOGGING=false

# Test Security - Minimal for faster tests
CSRF_SECRET=test-csrf-secret-32-characters-min
RATE_LIMIT_MAX_REQUESTS=10000
RATE_LIMIT_WINDOW_MS=1000

# Test AI Configuration - Use mock responses
OPENROUTER_API_KEY=test_key_mock_responses
GOOGLE_GENERATIVE_AI_API_KEY=test_key_mock_responses
AI_MODEL=mock-model
AI_MAX_TOKENS=1000
AI_TEMPERATURE=0.5
AI_REQUEST_TIMEOUT=5000
AI_MAX_RETRIES=1

# Test Feature Flags - Disable external services
ENABLE_HOT_RELOAD=false
ENABLE_SOURCE_MAPS=true
ENABLE_PERFORMANCE_MONITORING=false
ENABLE_ERROR_REPORTING=false
ENABLE_ANALYTICS=false
ENABLE_EXPERIMENTAL_FEATURES=true

# Test ElectricSQL - Use in-memory or mock
ELECTRIC_URL=http://localhost:5134
ELECTRIC_TOKEN=test_token

# Test Cache - In-memory only
CACHE_TTL=1000
CACHE_MAX_SIZE=10

# Test Timeouts - Short for fast tests
TEST_TIMEOUT=5000
TEST_PARALLEL=true
TEST_COVERAGE_THRESHOLD=80
HEALTH_CHECK_TIMEOUT=1000

# Test Database Settings - Fast cleanup
DATABASE_MAX_CONNECTIONS=5
DATABASE_IDLE_TIMEOUT=1000
DATABASE_CONNECTION_TIMEOUT=1000