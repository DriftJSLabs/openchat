# ==============================================================================
# OpenChat Application - Environment Configuration Template
# ==============================================================================
# Copy this file to .env.local and fill in your actual values
# DO NOT commit .env.local to version control

# ==============================================================================
# APPLICATION ENVIRONMENT
# ==============================================================================
NODE_ENV=development
NEXT_PUBLIC_APP_NAME=OpenChat
NEXT_PUBLIC_APP_VERSION=1.0.0

# ==============================================================================
# DATABASE CONFIGURATION
# ==============================================================================
# Primary PostgreSQL database connection
# Use localhost when running on host machine, postgres when running in Docker
DATABASE_URL=postgresql://openchat:openchat_dev@localhost:5432/openchat_dev
# Set to true when running in Docker containers
DOCKER=false

# ElectricSQL configuration for real-time sync
ELECTRIC_URL=http://localhost:5133
ELECTRIC_TOKEN=your_electric_token_here
DATABASE_REPLICA_URL=postgresql://openchat:openchat_dev@127.0.0.1:5432/openchat_dev

# Database connection pool settings
DATABASE_MAX_CONNECTIONS=20
DATABASE_IDLE_TIMEOUT=10000
DATABASE_CONNECTION_TIMEOUT=5000

# ==============================================================================
# SERVER CONFIGURATION
# ==============================================================================
# Server host and port configuration
SERVER_HOST=localhost
SERVER_PORT=3000
NEXT_PUBLIC_SERVER_URL=http://localhost:3000

# Web client configuration
WEB_PORT=3001
NEXT_PUBLIC_WEB_URL=http://localhost:3001

# ==============================================================================
# AUTHENTICATION & SECURITY
# ==============================================================================
# Better Auth configuration
BETTER_AUTH_SECRET=your-secret-key-here-generate-a-secure-random-string-minimum-32-characters
BETTER_AUTH_URL=http://localhost:3000
BETTER_AUTH_TRUSTED_ORIGINS=http://localhost:3001,http://localhost:3000

# Session configuration
SESSION_MAX_AGE=86400
SESSION_UPDATE_AGE=3600

# CSRF protection
CSRF_SECRET=your-csrf-secret-here-32-characters-minimum

# Rate limiting
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_SKIP_SUCCESSFUL_REQUESTS=true

# ==============================================================================
# AI & LANGUAGE MODEL CONFIGURATION
# ==============================================================================
# OpenRouter API (primary AI provider)
OPENROUTER_API_KEY=your_openrouter_api_key_here
OPENROUTER_MODEL=openai/gpt-4-turbo-preview

# Google Generative AI (backup/alternative)
GOOGLE_GENERATIVE_AI_API_KEY=your_google_ai_api_key_here
GOOGLE_AI_MODEL=gemini-pro

# AI model parameters
AI_MAX_TOKENS=4096
AI_TEMPERATURE=0.7
AI_TOP_P=0.9
AI_FREQUENCY_PENALTY=0.0
AI_PRESENCE_PENALTY=0.0

# AI request timeout and retry configuration
AI_REQUEST_TIMEOUT=30000
AI_MAX_RETRIES=3
AI_RETRY_DELAY=1000

# ==============================================================================
# CORS & SECURITY POLICIES
# ==============================================================================
# CORS configuration for cross-origin requests
CORS_ORIGIN=http://localhost:3001
CORS_METHODS=GET,HEAD,PUT,PATCH,POST,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-Requested-With,Accept,X-CSRF-Token
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Content Security Policy
CSP_REPORT_URI=/api/csp-report
CSP_REPORT_ONLY=false

# Security headers
HSTS_MAX_AGE=31536000
HSTS_INCLUDE_SUBDOMAINS=true
HSTS_PRELOAD=true

# ==============================================================================
# LOGGING & MONITORING
# ==============================================================================
# Log level configuration (error, warn, info, debug)
LOG_LEVEL=debug
LOG_FORMAT=json
LOG_TIMESTAMP=true

# Performance monitoring
ENABLE_PERFORMANCE_MONITORING=true
PERFORMANCE_SAMPLE_RATE=0.1

# Health check configuration
HEALTH_CHECK_INTERVAL=30000
HEALTH_CHECK_TIMEOUT=5000

# ==============================================================================
# FILE UPLOADS & STORAGE
# ==============================================================================
# File upload limits
MAX_FILE_SIZE=10485760
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,application/pdf,text/plain
UPLOAD_DIR=./uploads

# Static file serving
STATIC_FILE_MAX_AGE=31536000

# ==============================================================================
# CACHING CONFIGURATION
# ==============================================================================
# Redis cache configuration (optional)
REDIS_URL=redis://localhost:6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_CONNECT_TIMEOUT=10000
REDIS_COMMAND_TIMEOUT=5000

# In-memory cache settings
CACHE_TTL=300000
CACHE_MAX_SIZE=1000

# ==============================================================================
# DEVELOPMENT & TESTING
# ==============================================================================
# Development mode settings
ENABLE_HOT_RELOAD=true
ENABLE_SOURCE_MAPS=true
ENABLE_DEBUG_LOGGING=true

# Test database (separate from development)
TEST_DATABASE_URL=postgresql://openchat:openchat_test@localhost:5433/openchat_test

# Testing configuration
TEST_TIMEOUT=30000
TEST_PARALLEL=true
TEST_COVERAGE_THRESHOLD=80

# ==============================================================================
# CLOUDFLARE CONFIGURATION (Production)
# ==============================================================================
# Cloudflare D1 database (for production deployment)
CLOUDFLARE_ACCOUNT_ID=your_cloudflare_account_id
CLOUDFLARE_DATABASE_ID=your_cloudflare_database_id
CLOUDFLARE_D1_TOKEN=your_cloudflare_d1_token

# Cloudflare Workers configuration
CLOUDFLARE_ZONE_ID=your_zone_id
CLOUDFLARE_API_TOKEN=your_api_token

# ==============================================================================
# WEBHOOK & EXTERNAL INTEGRATIONS
# ==============================================================================
# Webhook configuration for external services
WEBHOOK_SECRET=your_webhook_secret_here
WEBHOOK_TIMEOUT=15000

# External API endpoints
ANALYTICS_ENDPOINT=https://analytics.example.com/api
MONITORING_ENDPOINT=https://monitoring.example.com/api

# ==============================================================================
# FEATURE FLAGS
# ==============================================================================
# Feature toggles for different environments
ENABLE_ANALYTICS=true
ENABLE_ERROR_REPORTING=true
ENABLE_PERFORMANCE_PROFILING=false
ENABLE_EXPERIMENTAL_FEATURES=false
ENABLE_MAINTENANCE_MODE=false

# ==============================================================================
# BACKUP & DISASTER RECOVERY
# ==============================================================================
# Database backup configuration
BACKUP_ENABLED=true
BACKUP_INTERVAL=86400000
BACKUP_RETENTION_DAYS=30
BACKUP_STORAGE_PATH=./backups

# ==============================================================================
# PRODUCTION OVERRIDES
# ==============================================================================
# These values should be overridden in production environments
# BETTER_AUTH_URL=https://your-domain.com
# NEXT_PUBLIC_SERVER_URL=https://your-domain.com
# CORS_ORIGIN=https://your-frontend-domain.com
# DATABASE_URL=postgresql://username:password@prod-host:5432/prod_db
# LOG_LEVEL=warn